---
import Layout from '../layouts/Layout.astro';
import Navigation from '../components/Navigation.astro';

// FAQ data structure
const categories = [
  'All',
  'Cost & ROI',
  'I\'m Not Tech-Savvy',
  'QuickBooks & Invoice',
  'AI vs Traditional',
  'Getting Started',
  'Industry-Specific',
  'Implementation & Support',
  'Security & Compliance',
  'Integration',
  'Results & Expectations'
];

const faqs = [
  // Cost & ROI
  {
    id: 1,
    category: 'Cost & ROI',
    question: 'What does business automation actually cost?',
    answer: 'It depends on what you need automated. Simple workflows (like automatic invoice reminders) start around $150/month. More complex systems (like full QuickBooks automation with multiple touchpoints) run $500-1500/month. I always start with a free consultation to understand your needs and give you real numbers - no surprise pricing.',
    popular: true
  },
  {
    id: 2,
    category: 'Cost & ROI',
    question: 'How quickly will I see a return on my investment?',
    answer: 'Most clients break even within 2-3 months. If you\'re currently spending 10 hours a week on tasks we automate, and you value your time at even $50/hour, that\'s $2,000/month in time savings alone. Plus, automated systems don\'t miss follow-ups, which means more collected revenue.',
    popular: true
  },
  {
    id: 3,
    category: 'Cost & ROI',
    question: 'Can I afford NOT to automate?',
    answer: 'Let\'s flip this question: What\'s it costing you now? Late nights doing data entry, missed follow-ups with clients, errors from manual work, or simply not having time to grow your business. One client told me automation gave her her weekends back - what\'s that worth to you?',
    popular: false
  },
  {
    id: 4,
    category: 'Cost & ROI',
    question: 'Is there a contract or can I cancel anytime?',
    answer: 'No long-term contracts. We work month-to-month after the initial setup. If the automation isn\'t saving you time and money, you can cancel with 30 days notice. I\'m confident in the value, so I don\'t need to lock you in.',
    popular: false
  },
  {
    id: 5,
    category: 'Cost & ROI',
    question: 'Do you offer payment plans?',
    answer: 'Yes, for larger implementations, we can spread the setup cost over 3-6 months. The goal is to make automation accessible, not create financial stress.',
    popular: false
  },

  // I'm Not Tech-Savvy
  {
    id: 6,
    category: 'I\'m Not Tech-Savvy',
    question: 'I can barely handle email. Can I really use automation?',
    answer: 'Absolutely. The whole point is to make your life easier, not harder. Once set up, good automation runs itself. You won\'t need to touch code or learn complicated software. If you can send a text message, you can use what I build for you.',
    popular: true
  },
  {
    id: 7,
    category: 'I\'m Not Tech-Savvy',
    question: 'What if I break something?',
    answer: 'You won\'t. I design systems specifically for non-technical users. Everything has safeguards, clear instructions, and fail-safes. Plus, I\'m always a phone call away if you need help.',
    popular: false
  },
  {
    id: 8,
    category: 'I\'m Not Tech-Savvy',
    question: 'Will I need to learn new software?',
    answer: 'Minimal to none. Most automations work with software you already use (like QuickBooks or Gmail). When we do introduce something new, it\'s always simple and I provide full training.',
    popular: false
  },
  {
    id: 9,
    category: 'I\'m Not Tech-Savvy',
    question: 'How much time will I need to invest in learning this?',
    answer: 'Usually 1-2 hours total. I provide video walkthroughs, written guides, and live training. Most clients are comfortable within a week.',
    popular: false
  },

  // QuickBooks & Invoice
  {
    id: 10,
    category: 'QuickBooks & Invoice',
    question: 'Can you really automate my QuickBooks invoice follow-ups?',
    answer: 'Yes, completely. Imagine this: Invoice goes out → automatic friendly reminder at 7 days → firmer reminder at 14 days → final notice at 30 days → notification to you if still unpaid. All personalized, all automatic. One plumber client increased his on-time payments by 40% in two months.',
    popular: true
  },
  {
    id: 11,
    category: 'QuickBooks & Invoice',
    question: 'What if my clients get annoyed by automated reminders?',
    answer: 'They won\'t, because these aren\'t robotic spam emails. They\'re personalized, professionally written messages that sound like they came from you. Plus, most clients appreciate the reminders - they\'re busy too and often just forgot.',
    popular: false
  },
  {
    id: 12,
    category: 'QuickBooks & Invoice',
    question: 'Can automation handle partial payments or payment plans?',
    answer: 'Yes. The system can track partial payments, adjust reminders accordingly, and even manage payment plan schedules. It\'s smarter than just "paid or unpaid."',
    popular: false
  },
  {
    id: 13,
    category: 'QuickBooks & Invoice',
    question: 'Does it work with QuickBooks Desktop or just Online?',
    answer: 'I primarily work with QuickBooks Online because it has better automation capabilities. If you\'re on Desktop, I can help you transition or find workarounds.',
    popular: false
  },
  {
    id: 14,
    category: 'QuickBooks & Invoice',
    question: 'Can it send different types of invoices to different types of clients?',
    answer: 'Absolutely. Residential vs commercial, net-30 vs due-on-receipt, regular clients vs one-offs - the automation can handle different rules for different client types.',
    popular: false
  },

  // AI vs Traditional
  {
    id: 15,
    category: 'AI vs Traditional',
    question: 'Is this just ChatGPT in a fancy wrapper?',
    answer: 'No. While I use AI as one tool in my toolkit, real business automation is about connecting your existing systems, creating reliable workflows, and solving specific problems. AI might help write a customer email, but the automation that tracks invoices, schedules follow-ups, and updates your CRM? That\'s solid, proven technology.',
    popular: true
  },
  {
    id: 16,
    category: 'AI vs Traditional',
    question: 'How is this different from just hiring a virtual assistant?',
    answer: 'Automation works 24/7, never calls in sick, never makes typos, and costs less than a part-time VA. Plus, it scales instantly - handling 10 invoices or 1,000 takes the same effort. That said, automation handles repetitive tasks so you (or your VA) can focus on work that actually needs a human touch.',
    popular: false
  },
  {
    id: 17,
    category: 'AI vs Traditional',
    question: 'Will AI replace my job?',
    answer: 'No, it frees you to do your actual job. If you\'re a plumber, automation handles the invoicing so you can fix pipes. If you\'re a consultant, it manages scheduling so you can consult. It handles the boring stuff you hate anyway.',
    popular: false
  },
  {
    id: 18,
    category: 'AI vs Traditional',
    question: 'What happens when AI makes a mistake?',
    answer: 'Good automation has human checkpoints for critical decisions. AI might draft an email, but you approve it. It might flag an overdue invoice, but you decide how to handle a long-time client. I build in safeguards.',
    popular: false
  },

  // Getting Started
  {
    id: 19,
    category: 'Getting Started',
    question: 'How do I know if my business needs automation?',
    answer: 'If you\'ve ever thought "there has to be a better way" while doing the same task for the hundredth time, you need automation. If you\'re working evenings and weekends on admin tasks instead of growing your business, you need automation. If you\'ve ever lost a client because you dropped the ball on follow-up, you definitely need automation.',
    popular: false
  },
  {
    id: 20,
    category: 'Getting Started',
    question: 'What\'s the first step?',
    answer: 'We start with a free 30-minute consultation. No prep needed - just bring your biggest headaches and I\'ll show you what\'s possible. We\'ll identify your most painful repetitive tasks and I\'ll give you honest feedback on what can be automated.',
    popular: false
  },
  {
    id: 21,
    category: 'Getting Started',
    question: 'How long does implementation take?',
    answer: 'Simple automations can be up and running in a week. More complex systems take 2-4 weeks. I work with your schedule and can phase implementation so you see value immediately while we build the complete system.',
    popular: false
  },
  {
    id: 22,
    category: 'Getting Started',
    question: 'What information do you need from me?',
    answer: 'Initially, just a conversation about your pain points. For implementation, we\'ll need access to the relevant systems (with your permission), examples of your current processes, and maybe 2-3 hours of your time total for setup and training.',
    popular: false
  },
  {
    id: 23,
    category: 'Getting Started',
    question: 'Can we start small and expand later?',
    answer: 'That\'s actually my preferred approach. Start with one painful problem, automate it, see the results, then expand. Most clients start with invoice follow-ups and add more automations once they see how much time they save.',
    popular: false
  },

  // Industry-Specific
  {
    id: 24,
    category: 'Industry-Specific',
    question: 'I\'m in construction/trades. Will this work for my industry?',
    answer: 'Absolutely. I\'ve automated invoicing for plumbers, estimate follow-ups for electricians, and project updates for general contractors. Construction businesses often see the biggest wins because you\'re usually too busy on job sites to handle office work.',
    popular: false
  },
  {
    id: 25,
    category: 'Industry-Specific',
    question: 'Does this work for professional services (lawyers, accountants, consultants)?',
    answer: 'Yes. While every industry has unique needs, the core problems are similar: client communication, appointment scheduling, invoice tracking, and follow-ups. I\'ve helped consultants automate proposal follow-ups and lawyers automate client intake.',
    popular: false
  },
  {
    id: 26,
    category: 'Industry-Specific',
    question: 'What about retail or e-commerce?',
    answer: 'Definitely. Inventory alerts, customer follow-ups, review requests, abandoned cart reminders - retail has tons of automation opportunities. One boutique owner told me automation gave her time to actually talk to customers instead of doing data entry.',
    popular: false
  },
  {
    id: 27,
    category: 'Industry-Specific',
    question: 'Can you handle regulated industries like healthcare?',
    answer: 'Yes, with appropriate safeguards. I\'ve worked with dental offices and medical practices. We ensure all automations comply with HIPAA and other regulations. Some processes may need more human oversight, but there\'s still plenty we can automate safely.',
    popular: false
  },

  // Implementation & Support
  {
    id: 28,
    category: 'Implementation & Support',
    question: 'What if I need help after setup?',
    answer: 'I\'m not one of those "set it and forget it" consultants. Every client gets my cell number. Quick questions are free. For ongoing support or major changes, I offer maintenance packages. Most issues are solved with a 5-minute phone call.',
    popular: false
  },
  {
    id: 29,
    category: 'Implementation & Support',
    question: 'Who actually builds and maintains the automation?',
    answer: 'I do. This isn\'t outsourced to overseas developers or junior staff. You work directly with me from consultation through implementation and support. I\'m based in Connecticut and understand local business needs.',
    popular: false
  },
  {
    id: 30,
    category: 'Implementation & Support',
    question: 'What happens if you\'re not available?',
    answer: 'All automations are built on reliable platforms that won\'t break if I\'m on vacation. I document everything clearly so any competent tech person could maintain it if needed. But in 10 years, I\'ve never left a client hanging.',
    popular: false
  },
  {
    id: 31,
    category: 'Implementation & Support',
    question: 'How do you handle training my team?',
    answer: 'I provide video tutorials, written guides, and live training sessions. Everything is recorded so new employees can get up to speed. Most systems are so intuitive that training takes less than an hour.',
    popular: false
  },
  {
    id: 32,
    category: 'Implementation & Support',
    question: 'Can you integrate with my existing systems?',
    answer: 'Almost always. I\'ve integrated with dozens of CRMs, accounting systems, and industry-specific software. If your systems can talk to the internet, I can probably automate them.',
    popular: false
  },

  // Security & Compliance
  {
    id: 33,
    category: 'Security & Compliance',
    question: 'Is my data safe with automation?',
    answer: 'Yes. I use enterprise-grade security, encrypted connections, and follow best practices for data protection. Your data stays in your systems - the automation just connects them securely. I\'m also fully insured.',
    popular: false
  },
  {
    id: 34,
    category: 'Security & Compliance',
    question: 'What about client confidentiality?',
    answer: 'Automation actually improves confidentiality by reducing human touchpoints. Fewer people need access to sensitive data when systems handle routine tasks automatically. All automations can include audit trails for compliance.',
    popular: false
  },
  {
    id: 35,
    category: 'Security & Compliance',
    question: 'Do you sign NDAs?',
    answer: 'Of course. Your business information is confidential. I sign NDAs regularly and take client privacy seriously. What happens in your business stays in your business.',
    popular: false
  },
  {
    id: 36,
    category: 'Security & Compliance',
    question: 'Can automation help with compliance requirements?',
    answer: 'Yes! Automation is great for compliance because it creates consistent, documented processes. Need to track client communications for regulatory reasons? Automation can log everything automatically.',
    popular: false
  },

  // Integration
  {
    id: 37,
    category: 'Integration',
    question: 'Will this work with my existing software?',
    answer: 'In 95% of cases, yes. Popular platforms like QuickBooks, Gmail, Outlook, most CRMs, and even industry-specific tools usually have ways to connect. During our consultation, I\'ll verify compatibility with your specific stack.',
    popular: false
  },
  {
    id: 38,
    category: 'Integration',
    question: 'What if I change software later?',
    answer: 'Good automation is modular. If you switch from, say, QuickBooks to Xero, we update that connection point without rebuilding everything. I design with flexibility in mind because businesses evolve.',
    popular: false
  },
  {
    id: 39,
    category: 'Integration',
    question: 'Can you connect systems that don\'t normally talk to each other?',
    answer: 'Usually, yes. Even if two systems don\'t have direct integration, I can often build bridges using automation platforms. I\'ve connected some pretty unusual combinations - if data can get out of one system, I can probably get it into another.',
    popular: false
  },
  {
    id: 40,
    category: 'Integration',
    question: 'Do I need to buy new software?',
    answer: 'Rarely. I prefer working with what you already have and know. Sometimes I might recommend a tool to fill a specific gap, but only if it provides clear value. No expensive software packages required.',
    popular: false
  },

  // Results & Expectations
  {
    id: 41,
    category: 'Results & Expectations',
    question: 'What results do your clients typically see?',
    answer: 'The numbers speak for themselves: 10-15 hours saved per week, 40% improvement in on-time payments, 90% fewer missed follow-ups, and most importantly - business owners who actually enjoy running their business again instead of drowning in admin work.',
    popular: false
  },
  {
    id: 42,
    category: 'Results & Expectations',
    question: 'How do I measure if automation is working?',
    answer: 'We set clear metrics upfront: hours saved, payment speed, response times, error rates, etc. I provide monthly reports showing exactly what the automation is doing. You\'ll feel the difference in your daily stress levels too.',
    popular: false
  },
  {
    id: 43,
    category: 'Results & Expectations',
    question: 'What if it doesn\'t work for my business?',
    answer: 'In 10 years, I\'ve never had a business that couldn\'t benefit from some form of automation. But if we truly can\'t find value, I\'ll tell you upfront. I\'m not interested in selling you something you don\'t need.',
    popular: false
  },
  {
    id: 44,
    category: 'Results & Expectations',
    question: 'What\'s the biggest mistake businesses make with automation?',
    answer: 'Waiting too long to start. Every week you delay is another week of wasted time and missed opportunities. The second biggest mistake? Trying to automate everything at once instead of starting with one painful problem and expanding from there.',
    popular: false
  }
];

// Get the top 6 popular FAQs
const popularFaqs = faqs.filter(faq => faq.popular).slice(0, 6);

// Group FAQs by category
const faqsByCategory = categories.slice(1).reduce((acc, category) => {
  acc[category] = faqs.filter(faq => faq.category === category);
  return acc;
}, {});

// Category metadata
const categoryMeta = {
  'Cost & ROI': {
    icon: '💰',
    color: 'emerald',
    description: 'Investment, returns, and pricing'
  },
  'I\'m Not Tech-Savvy': {
    icon: '🤷',
    color: 'blue',
    description: 'For the technically challenged'
  },
  'QuickBooks & Invoice': {
    icon: '📊',
    color: 'purple',
    description: 'Accounting and billing automation'
  },
  'AI vs Traditional': {
    icon: '🤖',
    color: 'indigo',
    description: 'Understanding modern automation'
  },
  'Getting Started': {
    icon: '🚀',
    color: 'orange',
    description: 'Your first steps'
  },
  'Industry-Specific': {
    icon: '🏭',
    color: 'teal',
    description: 'Solutions for your field'
  },
  'Implementation & Support': {
    icon: '🛠️',
    color: 'yellow',
    description: 'Setup and ongoing help'
  },
  'Security & Compliance': {
    icon: '🔒',
    color: 'red',
    description: 'Keeping your data safe'
  },
  'Integration': {
    icon: '🔗',
    color: 'cyan',
    description: 'Connecting your tools'
  },
  'Results & Expectations': {
    icon: '📈',
    color: 'pink',
    description: 'What to expect'
  }
};
---

<Layout 
  title="FAQ - Connecticut Business Automation | Your Questions Answered" 
  description="Get straight answers about business automation. No sales pitch, just honest information about costs, implementation, and results for Connecticut small businesses."
>
  <Navigation />

  <!-- Hero Section -->
  <section class="relative min-h-[60vh] flex items-center pt-16">
    <!-- Gradient background -->
    <div class="absolute inset-0 bg-gradient-to-br from-navy-900 via-navy-800 to-coral-500"></div>
    
    <!-- Pattern overlay -->
    <div class="absolute inset-0 opacity-5">
      <div class="absolute inset-0" style="background-image: url('data:image/svg+xml,%3Csvg width="60" height="60" xmlns="http://www.w3.org/2000/svg"%3E%3Cdefs%3E%3Cpattern id="grid" width="60" height="60" patternUnits="userSpaceOnUse"%3E%3Cpath d="M 60 0 L 0 0 0 60" fill="none" stroke="white" stroke-width="0.5"/%3E%3C/pattern%3E%3C/defs%3E%3Crect width="100%25" height="100%25" fill="url(%23grid)" /%3E%3C/svg%3E')"></div>
    </div>

    <div class="relative z-10 container mx-auto px-4 py-16">
      <div class="text-center max-w-4xl mx-auto">
        <h1 class="font-display text-white mb-6 text-4xl sm:text-5xl lg:text-6xl leading-tight font-semibold">
          Straight Answers to Your Automation Questions
        </h1>
        
        <p class="text-xl sm:text-2xl text-white/90 mb-8">
          No sales pitch, just honest information about business automation in Connecticut
        </p>

        <!-- Search Bar -->
        <div class="max-w-2xl mx-auto">
          <div class="relative">
            <input 
              type="text" 
              id="faq-search-input"
              placeholder="Search questions..." 
              class="w-full px-6 py-4 pr-12 text-lg rounded-lg bg-white/95 backdrop-blur-sm text-navy-900 placeholder-navy-600/60 focus:outline-none focus:ring-4 focus:ring-coral-500/30 transition-all"
            >
            <svg class="absolute right-4 top-1/2 transform -translate-y-1/2 w-6 h-6 text-navy-600/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ Content -->
  <section class="py-20 px-4 bg-gray-50" x-data="faqSearch()" x-init="initSearch()">
    <div class="container mx-auto max-w-6xl">
      <!-- Category Pills with Anchors -->
      <div class="mb-16 overflow-x-auto sticky top-16 bg-gray-50 py-4 z-30">
        <div class="flex gap-3 min-w-max mx-auto justify-center flex-wrap pb-4">
          {categories.map((category) => {
            // Escape single quotes for Alpine.js
            const escapedCategory = category.replace(/'/g, "\\'");
            const categoryId = category.toLowerCase().replace(/[^a-z0-9]/g, '-');
            return (
              <button
                @click={`activeCategory = '${escapedCategory}'; if('${escapedCategory}' !== 'All') { document.getElementById('${categoryId}')?.scrollIntoView({ behavior: 'smooth', block: 'start', blockOffset: 100 }) }`}
                :class={`activeCategory === '${escapedCategory}' ? 'bg-coral-500 text-white shadow-lg' : 'bg-white text-navy-900 hover:bg-gray-100 shadow-sm'`}
                class="px-6 py-2.5 rounded-full font-medium transition-all duration-200 whitespace-nowrap border border-transparent"
              >
                {category}
                {category !== 'All' && (
                  <span class="ml-2 text-xs opacity-70">
                    ({faqsByCategory[category]?.length || 0})
                  </span>
                )}
              </button>
            );
          })}
        </div>
      </div>

      <!-- Popular Questions Section -->
      <div class="mb-20" x-show="!searchQuery && activeCategory === 'All'">
        <h2 class="text-3xl font-display font-semibold text-navy-900 mb-8 text-center">
          Most Popular Questions
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <template x-for="faq in popularFaqs" :key="faq.id">
            <div
              class="bg-white p-6 rounded-xl shadow-md hover:shadow-xl transition-all duration-200 cursor-pointer border-2 border-coral-500"
              @click="expandedId = expandedId === faq.id ? null : faq.id"
            >
              <div class="flex items-start justify-between mb-3">
                <h3 class="font-semibold text-lg leading-tight flex-1 pr-2 text-navy-900" x-text="faq.question"></h3>
                <svg 
                  class="w-5 h-5 flex-shrink-0 transition-transform duration-200 mt-1 text-coral-500"
                  :class="expandedId === faq.id ? 'rotate-180' : ''"
                  fill="none" 
                  stroke="currentColor" 
                  viewBox="0 0 24 24"
                >
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </div>
              <div class="mb-3">
                <span class="inline-block px-3 py-1 text-xs font-medium bg-coral-100 text-coral-700 rounded-full">
                  Popular
                </span>
              </div>
              <p 
                class="text-gray-600 text-sm line-clamp-2"
                x-show="expandedId !== faq.id"
                x-text="faq.answer"
              >
              </p>
              <p 
                class="text-gray-600 text-sm"
                x-show="expandedId === faq.id"
                x-transition:enter="transition ease-out duration-200"
                x-transition:enter-start="opacity-0"
                x-transition:enter-end="opacity-100"
                x-text="faq.answer"
              >
              </p>
            </div>
          </template>
        </div>
      </div>

      <!-- Search Results / Filtered View -->
      <div x-show="searchQuery || activeCategory !== 'All'">
        <h2 class="text-2xl font-display font-semibold text-navy-900 mb-6">
          <span x-show="searchQuery">Search Results</span>
          <span x-show="!searchQuery && activeCategory !== 'All'" x-text="`${activeCategory} Questions`"></span>
        </h2>
        
        <div class="grid grid-cols-1 gap-6">
          <template x-for="(faq, index) in filteredFaqs" :key="faq.id">
            <div 
              class="bg-white p-8 rounded-xl shadow-sm hover:shadow-lg transition-all duration-200 cursor-pointer border border-gray-200"
              @click="expandedId = expandedId === faq.id ? null : faq.id"
            >
              <div class="flex items-start justify-between mb-4">
                <div class="flex-1">
                  <h3 class="font-semibold text-xl text-navy-900 leading-relaxed pr-4 mb-2" x-text="faq.question"></h3>
                  <span class="inline-block px-3 py-1 text-xs font-medium bg-gray-100 text-gray-700 rounded-full" x-text="faq.category"></span>
                </div>
                <svg 
                  class="w-6 h-6 text-coral-500 flex-shrink-0 transition-transform duration-200 mt-1"
                  :class="expandedId === faq.id ? 'rotate-180' : ''"
                  fill="none" 
                  stroke="currentColor" 
                  viewBox="0 0 24 24"
                >
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </div>
              
              <!-- Collapsed state - show preview -->
              <p 
                class="text-gray-600 text-base leading-relaxed line-clamp-3"
                x-show="expandedId !== faq.id"
                x-text="faq.answer"
              ></p>
              
              <!-- Expanded state - show full answer -->
              <div 
                x-show="expandedId === faq.id"
                x-transition:enter="transition ease-out duration-200"
                x-transition:enter-start="opacity-0 transform -translate-y-2"
                x-transition:enter-end="opacity-100 transform translate-y-0"
                x-transition:leave="transition ease-in duration-150"
                x-transition:leave-start="opacity-100 transform translate-y-0"
                x-transition:leave-end="opacity-0 transform -translate-y-2"
              >
                <p class="text-gray-600 text-base leading-relaxed whitespace-pre-line" x-text="faq.answer"></p>
              </div>
            </div>
          </template>
        </div>
      </div>

      <!-- All Categories View -->
      <div x-show="!searchQuery && activeCategory === 'All'" class="space-y-16">
        {Object.entries(faqsByCategory).map(([category, categoryFaqs]) => {
          const categoryId = category.toLowerCase().replace(/[^a-z0-9]/g, '-');
          const meta = categoryMeta[category];
          
          return (
            <div id={categoryId} class="scroll-mt-24">
              <!-- Category Header -->
              <div class={`mb-8 pb-4 border-b-2 border-${meta.color}-200`}>
                <div class="flex items-center gap-4">
                  <span class="text-4xl">{meta.icon}</span>
                  <div>
                    <h2 class="text-3xl font-display font-semibold text-navy-900">
                      {category}
                    </h2>
                    <p class="text-gray-600 mt-1">{meta.description}</p>
                  </div>
                  <span class={`ml-auto px-4 py-2 bg-${meta.color}-100 text-${meta.color}-700 rounded-full text-sm font-medium`}>
                    {categoryFaqs.length} questions
                  </span>
                </div>
              </div>
              
              <!-- Category Questions -->
              <div class="grid grid-cols-1 gap-6">
                {categoryFaqs.map((faq, index) => (
                  <div 
                    key={faq.id}
                    class={`bg-white p-8 rounded-xl shadow-sm hover:shadow-lg transition-all duration-200 cursor-pointer border-l-4 border-${meta.color}-400`}
                    x-data={`{ localExpanded: false }`}
                    @click="localExpanded = !localExpanded"
                  >
                    <div class="flex items-start justify-between mb-4">
                      <div class="flex-1">
                        <h3 class="font-semibold text-xl text-navy-900 leading-relaxed pr-4">
                          {faq.question}
                        </h3>
                      </div>
                      <svg 
                        class={`w-6 h-6 text-${meta.color}-500 flex-shrink-0 transition-transform duration-200 mt-1`}
                        :class="localExpanded ? 'rotate-180' : ''"
                        fill="none" 
                        stroke="currentColor" 
                        viewBox="0 0 24 24"
                      >
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                      </svg>
                    </div>
                    
                    <!-- Collapsed state -->
                    <p 
                      class="text-gray-600 text-base leading-relaxed line-clamp-3"
                      x-show="!localExpanded"
                    >
                      {faq.answer}
                    </p>
                    
                    <!-- Expanded state -->
                    <div 
                      x-show="localExpanded"
                      x-transition:enter="transition ease-out duration-200"
                      x-transition:enter-start="opacity-0 transform -translate-y-2"
                      x-transition:enter-end="opacity-100 transform translate-y-0"
                    >
                      <p class="text-gray-600 text-base leading-relaxed whitespace-pre-line">
                        {faq.answer}
                      </p>
                    </div>
                  </div>
                ))}
              </div>

              <!-- Back to Top Button -->
              <div class="text-center mt-8">
                <button 
                  @click="window.scrollTo({ top: 0, behavior: 'smooth' })"
                  class="inline-flex items-center gap-2 text-coral-500 hover:text-coral-600 font-medium"
                >
                  <svg class="w-5 h-5 rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                  </svg>
                  Back to top
                </button>
              </div>
            </div>
          );
        })}
      </div>

      <!-- No Results Message -->
      <div 
        x-show="filteredFaqs.length === 0" 
        x-transition
        class="text-center py-12"
      >
        <p class="text-xl text-gray-600 mb-4">No questions found matching your search.</p>
        <button 
          @click="searchQuery = ''; activeCategory = 'All'"
          class="text-coral-500 hover:text-coral-600 font-medium"
        >
          Clear filters
        </button>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-16 sm:py-20 px-4 bg-gradient-to-br from-navy-900 via-navy-800 to-coral-500 relative overflow-hidden">
    <!-- Pattern overlay -->
    <div class="absolute inset-0 opacity-5">
      <div class="absolute inset-0" style="background-image: url('data:image/svg+xml,%3Csvg width="60" height="60" xmlns="http://www.w3.org/2000/svg"%3E%3Cdefs%3E%3Cpattern id="grid" width="60" height="60" patternUnits="userSpaceOnUse"%3E%3Cpath d="M 60 0 L 0 0 0 60" fill="none" stroke="white" stroke-width="0.5"/%3E%3C/pattern%3E%3C/defs%3E%3Crect width="100%25" height="100%25" fill="url(%23grid)" /%3E%3C/svg%3E')"></div>
    </div>

    <div class="container mx-auto max-w-4xl text-center relative z-10">
      <h2 class="font-display text-3xl sm:text-4xl lg:text-5xl text-white mb-6">
        Still have questions?
      </h2>
      
      <p class="text-lg sm:text-xl text-white/90 mb-8 max-w-2xl mx-auto">
        Let's have a real conversation about your specific situation. No generic sales pitch - just honest advice about whether automation makes sense for you.
      </p>

      <div class="text-center">
        <a href="/contact" class="inline-flex items-center gap-2 bg-coral-500 text-white px-8 py-4 rounded-lg font-semibold hover:bg-coral-400 transition-all hover:scale-105 transform text-lg mb-6">
          <span>Get Real Answers</span>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
          </svg>
        </a>
        
        <p class="text-white/70 text-sm">
          tom@ctautomation.com • (203) 679-1715
        </p>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-charcoal text-white py-12 px-4">
    <div class="container mx-auto max-w-6xl">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
        <!-- Company -->
        <div>
          <h3 class="font-display text-xl mb-4">Connecticut Business Automation</h3>
          <p class="text-white/70 text-sm">
            Saving Connecticut businesses from manual work, one automation at a time.
          </p>
        </div>

        <!-- Quick Links -->
        <div>
          <h4 class="font-medium mb-4">Quick Links</h4>
          <ul class="space-y-2 text-white/70 text-sm">
            <li><a href="/services" class="hover:text-white transition-colors">Services</a></li>
            <li><a href="/about" class="hover:text-white transition-colors">About</a></li>
            <li><a href="/faq" class="hover:text-white transition-colors">FAQ</a></li>
            <li><a href="/contact" class="hover:text-white transition-colors">Contact</a></li>
          </ul>
        </div>

        <!-- Contact -->
        <div>
          <h4 class="font-medium mb-4">Get in Touch</h4>
          <ul class="space-y-2 text-white/70 text-sm">
            <li>
              <a href="mailto:tom@ctautomation.com" class="hover:text-white transition-colors">
                tom@ctautomation.com
              </a>
            </li>
            <li>(203) 679-1715</li>
            <li>Connecticut</li>
          </ul>
        </div>
      </div>

      <div class="border-t border-white/10 pt-8 text-center text-white/50 text-sm">
        <p>&copy; 2024 Connecticut Business Automation. All rights reserved.</p>
        <p class="mt-2">Built by someone who actually understands business.</p>
      </div>
    </div>
  </footer>
</Layout>

<script>
  // Mobile menu functionality is now handled by the Navigation component
</script>

<script define:vars={{ faqs, popularFaqs }}>
  // Alpine.js component for FAQ search and filtering
  window.faqSearch = function() {
    return {
      searchQuery: '',
      activeCategory: 'All',
      expandedId: null,
      faqs: faqs,
      popularFaqs: popularFaqs,
      
      initSearch() {
        // Connect the hero search input to this component
        const searchInput = document.getElementById('faq-search-input');
        if (searchInput) {
          searchInput.addEventListener('input', (e) => {
            this.searchQuery = e.target.value;
            // Scroll to FAQ section when user starts typing
            if (e.target.value.length > 0) {
              const faqSection = document.querySelector('[x-data="faqSearch()"]');
              if (faqSection) {
                faqSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
              }
            }
          });
        }
      },
      
      get filteredFaqs() {
        let filtered = this.faqs;
        
        // Filter by category
        if (this.activeCategory !== 'All') {
          filtered = filtered.filter(faq => faq.category === this.activeCategory);
        }
        
        // Filter by search query
        if (this.searchQuery) {
          const query = this.searchQuery.toLowerCase();
          filtered = filtered.filter(faq => 
            faq.question.toLowerCase().includes(query) || 
            faq.answer.toLowerCase().includes(query)
          );
        }
        
        return filtered;
      }
    }
  }
</script>

<style>
  /* Line clamp utility */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  /* Custom scrollbar for category pills */
  .overflow-x-auto::-webkit-scrollbar {
    height: 6px;
  }
  
  .overflow-x-auto::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 3px;
  }
  
  .overflow-x-auto::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 3px;
  }
  
  .overflow-x-auto::-webkit-scrollbar-thumb:hover {
    background: #94a3b8;
  }
  
  /* Smooth scroll behavior */
  html {
    scroll-behavior: smooth;
  }
  
  /* Add subtle animation to FAQ cards */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  [x-data] > div > div > div {
    animation: fadeInUp 0.5s ease-out;
    animation-fill-mode: both;
  }
  
  /* Stagger animation for FAQ items */
  [x-data] > div > div > div:nth-child(1) { animation-delay: 0.1s; }
  [x-data] > div > div > div:nth-child(2) { animation-delay: 0.15s; }
  [x-data] > div > div > div:nth-child(3) { animation-delay: 0.2s; }
  [x-data] > div > div > div:nth-child(4) { animation-delay: 0.25s; }
  [x-data] > div > div > div:nth-child(5) { animation-delay: 0.3s; }
  [x-data] > div > div > div:nth-child(6) { animation-delay: 0.35s; }

  /* Color classes for dynamic category colors */
  .border-emerald-200 { border-color: rgb(167 243 208); }
  .border-emerald-400 { border-color: rgb(52 211 153); }
  .bg-emerald-100 { background-color: rgb(209 250 229); }
  .text-emerald-700 { color: rgb(4 120 87); }
  .text-emerald-500 { color: rgb(16 185 129); }
  
  .border-blue-200 { border-color: rgb(191 219 254); }
  .border-blue-400 { border-color: rgb(96 165 250); }
  .bg-blue-100 { background-color: rgb(219 234 254); }
  .text-blue-700 { color: rgb(29 78 216); }
  .text-blue-500 { color: rgb(59 130 246); }
  
  .border-purple-200 { border-color: rgb(221 214 254); }
  .border-purple-400 { border-color: rgb(167 139 250); }
  .bg-purple-100 { background-color: rgb(237 233 254); }
  .text-purple-700 { color: rgb(109 40 217); }
  .text-purple-500 { color: rgb(139 92 246); }
  
  .border-indigo-200 { border-color: rgb(199 210 254); }
  .border-indigo-400 { border-color: rgb(129 140 248); }
  .bg-indigo-100 { background-color: rgb(224 231 255); }
  .text-indigo-700 { color: rgb(67 56 202); }
  .text-indigo-500 { color: rgb(99 102 241); }
  
  .border-orange-200 { border-color: rgb(254 215 170); }
  .border-orange-400 { border-color: rgb(251 146 60); }
  .bg-orange-100 { background-color: rgb(255 237 213); }
  .text-orange-700 { color: rgb(194 65 12); }
  .text-orange-500 { color: rgb(249 115 22); }
  
  .border-teal-200 { border-color: rgb(153 246 228); }
  .border-teal-400 { border-color: rgb(45 212 191); }
  .bg-teal-100 { background-color: rgb(204 251 241); }
  .text-teal-700 { color: rgb(15 118 110); }
  .text-teal-500 { color: rgb(20 184 166); }
  
  .border-yellow-200 { border-color: rgb(254 240 138); }
  .border-yellow-400 { border-color: rgb(250 204 21); }
  .bg-yellow-100 { background-color: rgb(254 249 195); }
  .text-yellow-700 { color: rgb(161 98 7); }
  .text-yellow-500 { color: rgb(234 179 8); }
  
  .border-red-200 { border-color: rgb(254 202 202); }
  .border-red-400 { border-color: rgb(248 113 113); }
  .bg-red-100 { background-color: rgb(254 226 226); }
  .text-red-700 { color: rgb(185 28 28); }
  .text-red-500 { color: rgb(239 68 68); }
  
  .border-cyan-200 { border-color: rgb(165 243 252); }
  .border-cyan-400 { border-color: rgb(34 211 238); }
  .bg-cyan-100 { background-color: rgb(207 250 254); }
  .text-cyan-700 { color: rgb(14 116 144); }
  .text-cyan-500 { color: rgb(6 182 212); }
  
  .border-pink-200 { border-color: rgb(251 207 232); }
  .border-pink-400 { border-color: rgb(244 114 182); }
  .bg-pink-100 { background-color: rgb(252 231 243); }
  .text-pink-700 { color: rgb(190 24 93); }
  .text-pink-500 { color: rgb(236 72 153); }
</style>